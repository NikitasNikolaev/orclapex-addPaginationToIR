set define off verify off feedback off
whenever sqlerror exit sql.sqlcode rollback
--------------------------------------------------------------------------------
--
-- ORACLE Application Express (APEX) export file
--
-- You should run the script connected to SQL*Plus as the Oracle user
-- APEX_050100 or as the owner (parsing schema) of the application.
--
-- NOTE: Calls to apex_application_install override the defaults below.
--
--------------------------------------------------------------------------------
begin
wwv_flow_api.import_begin (
 p_version_yyyy_mm_dd=>'2016.08.24'
,p_release=>'5.1.3.00.05'
,p_default_workspace_id=>1831002796446017
,p_default_application_id=>101
,p_default_owner=>'TEST'
);
end;
/
prompt --application/ui_types
begin
null;
end;
/
prompt --application/shared_components/plugins/dynamic_action/ir_pagination
begin
wwv_flow_api.create_plugin(
 p_id=>wwv_flow_api.id(5591120312102362)
,p_plugin_type=>'DYNAMIC ACTION'
,p_name=>'IR.PAGINATION'
,p_display_name=>'Add pagination to IR'
,p_category=>'MISC'
,p_supported_ui_types=>'DESKTOP'
,p_plsql_code=>wwv_flow_string.join(wwv_flow_t_varchar2(
'--Authors: Foad Olyaee: foad.olyaee@gmail.com, Morteza Mashhadi: morteza.mashhadi@gmail.com',
'--How to use this plugin:',
'--1. Set your Interactive Report pagination to Row Ranges X to Y of Z',
'--2.a Create a Dynamic Action, on "page load"',
'--2.b Add a true action, and set the action attribute to "Add pagination to IR" ',
'--3. Enjoy it...',
'--Notice: If you dont want to add this feature to an IR, just add `fao-pagination="none"` to the "Custom Attributes" in "Advanced section" of the target IR.',
'function render_irPagination (',
'    p_dynamic_action in apex_plugin.t_dynamic_action,',
'    p_plugin         in apex_plugin.t_plugin )',
'    return apex_plugin.t_dynamic_action_render_result',
'is',
'    l_result   apex_plugin.t_dynamic_action_render_result;',
'    v_totalRowsLabel varchar2(4000):=coalesce(p_dynamic_action.attribute_01, p_plugin.attribute_01,''Total number of rows:'');',
'    v_firstpageTitle varchar2(4000):=coalesce(p_dynamic_action.attribute_02, p_plugin.attribute_02,''First page'');',
'    v_lastpageTitle varchar2(4000):=coalesce(p_dynamic_action.attribute_03, p_plugin.attribute_03,''Last page'');',
'begin',
' ',
'   if apex_application.g_debug',
'   then',
'      apex_plugin_util.debug_dynamic_action(',
'         p_plugin         => p_plugin,',
'         p_dynamic_action => p_dynamic_action ',
'      );',
'   end if;',
'',
'   apex_javascript.add_library(',
'      p_name      => ''addPaginationIR'',',
'      p_directory => p_plugin.file_prefix,',
'      p_version   => NULL',
'   );',
'   ',
'   APEX_CSS.ADD_FILE(p_name => ''addPaginationIR'', p_directory => p_plugin.file_prefix);',
'',
'    l_result.javascript_function :=',
'            ''',
'            function(){ 	',
'            IRPagination.totalRowsLabel = ''''''|| v_totalRowsLabel ||'''''';',
'            IRPagination.firstPageTitle = ''''''|| v_firstpageTitle ||'''''';',
'            IRPagination.lastPageTitle = ''''''|| v_lastpageTitle ||'''''';',
'            $(document).on("apexafterrefresh", function(e) ',
'            { ',
'                IRPagination.func.addPaginationIR(); ',
'            });',
'	        setTimeout(function() { IRPagination.func.addPaginationIR(); }, 200);',
'            }'';',
'    return l_result;',
'',
'end  render_irPagination;'))
,p_api_version=>2
,p_render_function=>'render_irPagination'
,p_standard_attributes=>'REGION:ONLOAD'
,p_substitute_attributes=>true
,p_subscribe_plugin_settings=>true
,p_version_identifier=>'2.0'
,p_about_url=>'https://github.com/mortezamashhadi/orclapex-addPaginationToIR'
,p_files_version=>3
);
wwv_flow_api.create_plugin_attribute(
 p_id=>wwv_flow_api.id(5591320532108373)
,p_plugin_id=>wwv_flow_api.id(5591120312102362)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>1
,p_display_sequence=>10
,p_prompt=>'Label of total numbers'
,p_attribute_type=>'TEXT'
,p_is_required=>false
,p_default_value=>'Total number of rows:'
,p_is_translatable=>false
);
wwv_flow_api.create_plugin_attribute(
 p_id=>wwv_flow_api.id(5591617655112646)
,p_plugin_id=>wwv_flow_api.id(5591120312102362)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>2
,p_display_sequence=>20
,p_prompt=>'Title of first page'
,p_attribute_type=>'TEXT'
,p_is_required=>false
,p_default_value=>'First page'
,p_is_translatable=>false
);
wwv_flow_api.create_plugin_attribute(
 p_id=>wwv_flow_api.id(5591900845120642)
,p_plugin_id=>wwv_flow_api.id(5591120312102362)
,p_attribute_scope=>'COMPONENT'
,p_attribute_sequence=>3
,p_display_sequence=>30
,p_prompt=>'Title of last page'
,p_attribute_type=>'TEXT'
,p_is_required=>false
,p_default_value=>'Last page'
,p_is_translatable=>false
);
end;
/
begin
wwv_flow_api.g_varchar2_table := wwv_flow_api.empty_varchar2_table;
wwv_flow_api.g_varchar2_table(1) := '2E612D4952522D706167696E6174696F6E57726170207B206261636B67726F756E643A20236534653465343B20626F726465723A2031707820736F6C696420236365636563653B207D0D0A2E612D4952522D706167696E6174696F6E2D6974656D202E61';
wwv_flow_api.g_varchar2_table(2) := '2D4952522D627574746F6E2E612D4952522D627574746F6E2D2D706167696E6174696F6E207B0D0A2020202070616464696E673A203270782031707820327078203370783B0D0A202020206D617267696E3A2030203170783B0D0A7D0D0A2E612D495252';
wwv_flow_api.g_varchar2_table(3) := '2D706167696E6174696F6E2D73656C656374207B0D0A20202020766572746963616C2D616C69676E3A206D6964646C653B0D0A2020202070616464696E673A20303B0D0A202020206D617267696E3A202D3470782033707820303B0D0A20202020686569';
wwv_flow_api.g_varchar2_table(4) := '6768743A20313970783B0D0A202020206C696E652D6865696768743A20303B0D0A20202020666F6E742D73697A653A20313170783B0D0A20202020626F726465722D636F6C6F723A206761696E73626F726F3B0D0A20202020626F726465722D72616469';
wwv_flow_api.g_varchar2_table(5) := '75733A203370783B0D0A2020202077696474683A20393070783B0D0A20202020626F726465722D77696474683A203070783B0D0A7D0D0A2E612D495252202E612D4952522D706167696E6174696F6E2D696E666F207B0D0A20202020636F6C6F723A2023';
wwv_flow_api.g_varchar2_table(6) := '3730373037303B0D0A202020206D617267696E3A203070782038707820303B0D0A20202020646973706C61793A20696E6C696E652D626C6F636B3B0D0A7D';
null;
end;
/
begin
wwv_flow_api.create_plugin_file(
 p_id=>wwv_flow_api.id(5592446883132109)
,p_plugin_id=>wwv_flow_api.id(5591120312102362)
,p_file_name=>'addPaginationIR.css'
,p_mime_type=>'text/css'
,p_file_charset=>'utf-8'
,p_file_content=>wwv_flow_api.varchar2_to_blob(wwv_flow_api.g_varchar2_table)
);
end;
/
begin
wwv_flow_api.g_varchar2_table := wwv_flow_api.empty_varchar2_table;
wwv_flow_api.g_varchar2_table(1) := '766172204952506167696E6174696F6E203D207B7D3B0D0A4952506167696E6174696F6E2E746F74616C526F77734C6162656C203D2027273B0D0A4952506167696E6174696F6E2E6669727374506167655469746C65203D2027273B0D0A495250616769';
wwv_flow_api.g_varchar2_table(2) := '6E6174696F6E2E6C617374506167655469746C65203D2027273B0D0A4952506167696E6174696F6E2E66756E63203D207B0D0A20202020616464506167696E6174696F6E49523A2066756E6374696F6E202829207B0D0A20202020202020202428272E61';
wwv_flow_api.g_varchar2_table(3) := '2D4952522D636F6E7461696E657227292E656163682866756E6374696F6E202829207B0D0A090909696628242874686973292E636C6F7365737428275B66616F2D706167696E6174696F6E3D6E6F6E655D27292E6C656E6774683E30290D0A0909090972';
wwv_flow_api.g_varchar2_table(4) := '657475726E20747275653B0D0A0909092F2F2D2D2D0D0A0909097661722070616765537472203D20242874686973292E66696E6428272E612D4952522D706167696E6174696F6E2D6C6162656C27292E65712830292E7465787428293B0D0A0909097661';
wwv_flow_api.g_varchar2_table(5) := '7220706167654174747273203D206E657720526567457870282F285C642B29202D285C732B29285C642B2920285B5E5C645D2B29285C732B29285C642B292F6769292E6578656328242E7472696D28706167655374722E7265706C616365282F2C2F6769';
wwv_flow_api.g_varchar2_table(6) := '2C27272929290D0A09090969662821706167654174747273290D0A0909090972657475726E3B0D0A0909092F2F2D2D2D2D2D2D2D2D2D0D0A090909766172207049525F6964203D20242874686973292E617474722827696427292E73756273747228302C';
wwv_flow_api.g_varchar2_table(7) := '20242874686973292E617474722827696427292E6C656E6774682D33293B0D0A0909097661722070657250616765203D207061727365496E74282428272327202B207049525F6964202B275F726F775F73656C65637427292E76616C2829293B0D0A0909';
wwv_flow_api.g_varchar2_table(8) := '097661722073746172743D207061727365496E74287061676541747472735B315D293B0D0A09090976617220656E64203D207061727365496E74287061676541747472735B335D293B0D0A09090976617220746F74616C203D207061727365496E742870';
wwv_flow_api.g_varchar2_table(9) := '61676541747472735B365D293B0D0A2020202020202020202020207661722024706753656C656374203D202428273C73656C65637420636C6173733D22612D4952522D706167696E6174696F6E2D73656C6563742066616F2D706167696E6174696F6E2D';
wwv_flow_api.g_varchar2_table(10) := '6974656D223E27290D0A0D0A202020202020202020202020766172206D696E526F773B0D0A2020202020202020202020207661722069203D20303B0D0A202020202020202020202020666F72202869203D20303B2069203C2028746F74616C202F207065';
wwv_flow_api.g_varchar2_table(11) := '725061676529202D20313B20692B2B29207B0D0A202020202020202020202020202020206D696E526F77203D202869202A207065725061676529202B20313B0D0A2020202020202020202020202020202024706753656C6563742E617070656E6428273C';
wwv_flow_api.g_varchar2_table(12) := '6F7074696F6E2076616C75653D2227202B206D696E526F77202B2027222027202B20286D696E526F77203D3D207374617274203F202773656C656374656427203A20272729202B20273E27202B202869202B203129202B2027202827202B204952506167';
wwv_flow_api.g_varchar2_table(13) := '696E6174696F6E2E66756E632E746F536570617261746564506167654E756D626572286D696E526F7729202B2027202D2027202B204952506167696E6174696F6E2E66756E632E746F536570617261746564506167654E756D626572282869202A207065';
wwv_flow_api.g_varchar2_table(14) := '725061676529202B207065725061676529202B2027293C2F6F7074696F6E3E27293B0D0A2020202020202020202020207D0D0A2020202020202020202020206966202828746F74616C2025207065725061676529203E203029207B0D0A20202020202020';
wwv_flow_api.g_varchar2_table(15) := '2020202020202020206D696E526F77203D202869202A207065725061676529202B20313B0D0A2020202020202020202020202020202024706753656C6563742E617070656E6428273C6F7074696F6E2076616C75653D2227202B206D696E526F77202B20';
wwv_flow_api.g_varchar2_table(16) := '27222027202B20286D696E526F77203D3D207374617274203F202773656C656374656427203A20272729202B20273E27202B202869202B203129202B2027202827202B204952506167696E6174696F6E2E66756E632E746F536570617261746564506167';
wwv_flow_api.g_varchar2_table(17) := '654E756D626572286D696E526F7729202B2027202D2027202B204952506167696E6174696F6E2E66756E632E746F536570617261746564506167654E756D62657228746F74616C29202B2027293C2F6F7074696F6E3E27293B0D0A202020202020202020';
wwv_flow_api.g_varchar2_table(18) := '2020207D0D0A0D0A202020202020202020202020242874686973292E66696E6428272E66616F2D706167696E6174696F6E2D6974656D27292E72656D6F766528293B0D0A0D0A202020202020202020202020242874686973292E66696E6428272E612D49';
wwv_flow_api.g_varchar2_table(19) := '52522D706167696E6174696F6E2D6C6162656C27292E6869646528292E61667465722824706753656C656374293B0D0A202020202020202020202020242874686973292E66696E6428272E612D4952522D706167696E6174696F6E2D6C6162656C27292E';
wwv_flow_api.g_varchar2_table(20) := '616674657228273C627574746F6E207374796C653D22646973706C61793A6E6F6E653B2220636C6173733D22612D4952522D627574746F6E2D2D706167696E6174696F6E2066616F2D706167696E6174696F6E2D6974656D2220646174612D706167696E';
wwv_flow_api.g_varchar2_table(21) := '6174696F6E3D222220617269612D636F6E74726F6C733D2227202B207049525F6964202B20272220747970653D22627574746F6E223E403C2F627574746F6E3E27293B0D0A0D0A20202020202020202020202076617220247067436F6E7461696E657220';
wwv_flow_api.g_varchar2_table(22) := '3D20242874686973292E66696E6428272E612D4952522D706167696E6174696F6E27293B0D0A202020202020202020202020696620287374617274203E2031290D0A20202020202020202020202020202020247067436F6E7461696E65722E7072657065';
wwv_flow_api.g_varchar2_table(23) := '6E6428273C6C6920636C6173733D22612D4952522D706167696E6174696F6E2D6974656D2066616F2D706167696E6174696F6E2D6974656D223E3C627574746F6E20636C6173733D22612D427574746F6E20612D4952522D627574746F6E20612D495252';
wwv_flow_api.g_varchar2_table(24) := '2D627574746F6E2D2D706167696E6174696F6E2220646174612D706167696E6174696F6E3D227067525F6D696E5F726F773D316D61785F726F77733D27202B2070657250616765202B2027726F77735F666574636865643D27202B207065725061676520';
wwv_flow_api.g_varchar2_table(25) := '2B20272220617269612D6C6162656C3D22466972737422207469746C653D2227202B204952506167696E6174696F6E2E6669727374506167655469746C65202B20272220617269612D636F6E74726F6C733D2227202B207049525F6964202B2027222074';
wwv_flow_api.g_varchar2_table(26) := '7970653D22627574746F6E223E3C7370616E20636C6173733D22612D49636F6E2069636F6E2D6C6566742D6172726F772220617269612D68696464656E3D2274727565223E3C2F7370616E3E3C2F627574746F6E3E3C2F6C693E27293B0D0A2020202020';
wwv_flow_api.g_varchar2_table(27) := '20202020202020247067436F6E7461696E65722E70726570656E6428273C6C6920636C6173733D22612D4952522D706167696E6174696F6E2D6974656D2066616F2D706167696E6174696F6E2D6974656D223E3C7370616E20636C6173733D22612D4952';
wwv_flow_api.g_varchar2_table(28) := '522D706167696E6174696F6E2D696E666F223E27202B204952506167696E6174696F6E2E746F74616C526F77734C6162656C202B20272027202B20746F74616C202B20273C2F7370616E3E3C2F6C693E27290D0A20202020202020202020202069662028';
wwv_flow_api.g_varchar2_table(29) := '7374617274203C206D696E526F77290D0A20202020202020202020202020202020247067436F6E7461696E65722E617070656E6428273C6C6920636C6173733D22612D4952522D706167696E6174696F6E2D6974656D2066616F2D706167696E6174696F';
wwv_flow_api.g_varchar2_table(30) := '6E2D6974656D223E3C627574746F6E20636C6173733D22612D427574746F6E20612D4952522D627574746F6E20612D4952522D627574746F6E2D2D706167696E6174696F6E2220646174612D706167696E6174696F6E3D227067525F6D696E5F726F773D';
wwv_flow_api.g_varchar2_table(31) := '27202B206D696E526F77202B20276D61785F726F77733D27202B2070657250616765202B2027726F77735F666574636865643D27202B2070657250616765202B20272220617269612D6C6162656C3D224C61737422207469746C653D2227202B20495250';
wwv_flow_api.g_varchar2_table(32) := '6167696E6174696F6E2E6C617374506167655469746C65202B20272220617269612D636F6E74726F6C733D2227202B207049525F6964202B20272220747970653D22627574746F6E223E3C7370616E20636C6173733D22612D49636F6E2069636F6E2D72';
wwv_flow_api.g_varchar2_table(33) := '696768742D6172726F772220617269612D68696464656E3D2274727565223E3C2F7370616E3E3C2F627574746F6E3E3C2F6C693E27293B0D0A20202020202020207D293B0D0A20202020202020202428272E612D4952522D706167696E6174696F6E2D73';
wwv_flow_api.g_varchar2_table(34) := '656C65637427292E6368616E67652866756E6374696F6E20286F626A29207B0D0A202020202020202020202020766172207049525F6964203D20242874686973292E636C6F7365737428272E612D4952522D636F6E7461696E657227292E617474722827';
wwv_flow_api.g_varchar2_table(35) := '696427293B0D0A2020202020202020202020207049525F6964203D207049525F69642E73756273747228302C207049525F69642E6C656E677468202D2033293B0D0A2020202020202020202020207661722070657250616765203D202428272327202B20';
wwv_flow_api.g_varchar2_table(36) := '7049525F6964202B20275F726F775F73656C65637427292E76616C28293B0D0A202020202020202020202020242874686973292E7072657628292E617474722827646174612D706167696E6174696F6E272C20277067525F6D696E5F726F773D27202B20';
wwv_flow_api.g_varchar2_table(37) := '242874686973292E76616C2829202B20276D61785F726F77733D27202B2070657250616765202B2027726F77735F666574636865643D27202B2070657250616765292E636C69636B28293B0D0A20202020202020207D290D0A0D0A202020207D2C0D0A0D';
wwv_flow_api.g_varchar2_table(38) := '0A20202020746F536570617261746564506167654E756D6265723A2066756E6374696F6E20286E53747229207B0D0A20202020202020206E537472202B3D2027273B0D0A202020202020202076617220636F6D6D61203D202F2C2F673B0D0A2020202020';
wwv_flow_api.g_varchar2_table(39) := '2020207661722069734E6567203D206E5374722E7374617274735769746828272D27293B0D0A20202020202020206E537472203D206E5374720D0A2020202020202020202020202E7265706C61636528636F6D6D612C202727290D0A2020202020202020';
wwv_flow_api.g_varchar2_table(40) := '202020202E7265706C616365282F5B5E302D392C2E5D2B2F672C202222293B0D0A202020202020202078203D206E5374722E73706C697428272E27293B0D0A20202020202020207831203D20785B305D3B0D0A20202020202020207832203D20782E6C65';
wwv_flow_api.g_varchar2_table(41) := '6E677468203E2031203F20272E27202B20785B315D203A2027273B0D0A202020202020202076617220726778203D202F285C642B29285C647B337D292F3B0D0A20202020202020207768696C6520287267782E746573742878312929207B0D0A20202020';
wwv_flow_api.g_varchar2_table(42) := '20202020202020207831203D2078312E7265706C616365287267782C2027243127202B20272C27202B2027243227293B0D0A20202020202020207D0D0A202020202020202072657475726E202869734E6567203F20272D27203A20272729202B20783120';
wwv_flow_api.g_varchar2_table(43) := '2B2078323B0D0A202020207D0D0A7D3B0D0A0D0A0D0A0D0A0D0A';
null;
end;
/
begin
wwv_flow_api.create_plugin_file(
 p_id=>wwv_flow_api.id(5592760613132110)
,p_plugin_id=>wwv_flow_api.id(5591120312102362)
,p_file_name=>'addPaginationIR.js'
,p_mime_type=>'application/x-javascript'
,p_file_charset=>'utf-8'
,p_file_content=>wwv_flow_api.varchar2_to_blob(wwv_flow_api.g_varchar2_table)
);
end;
/
begin
wwv_flow_api.import_end(p_auto_install_sup_obj => nvl(wwv_flow_application_install.get_auto_install_sup_obj, false), p_is_component_import => true);
commit;
end;
/
set verify on feedback on define on
prompt  ...done
